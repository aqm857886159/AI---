.editor-wrapper {
  /* height: 100%;  <-- Removed to let it flow naturally */
  /* overflow-y: auto; <-- Removed to prevent double scrollbars */
  padding: 40px 20px;
  background: var(--pk-neutral-50);
  padding: 40px 20px;
  background: var(--pk-neutral-50);
  /* display: flex; <-- Removed to fix alignment issues */
  /* justify-content: center; */
}

/* The Paper */
.ProseMirror {
  width: 100%;
  max-width: 800px;
  /* Standard A4ish width */
  min-height: 900px;
  background: white;
  padding: 0;
  /* Let App.css handle padding */
  margin: 0 auto;
  /* Center itself */
  border-radius: 0;
  box-shadow: none;
  outline: none;
  font-family: var(--font-editor);
  color: var(--pk-neutral-900);
  font-size: 19px;
  /* Slightly larger for premium feel */
  line-height: 1.8;
}

/* Title Placeholder */
.ProseMirror p.is-editor-empty:first-child::before {
  content: attr(data-placeholder);
  float: left;
  color: var(--pk-neutral-300);
  pointer-events: none;
  height: 0;
  font-style: italic;
}

/* Selection */
.ProseMirror ::selection {
  background-color: var(--pk-brand-100);
  color: var(--pk-brand-900);
}

/* Typography */
.ProseMirror p {
  margin: 1.5em 0;
  line-height: 1.8;
}

.ProseMirror h1 {
  font-family: var(--font-sans);
  /* Headings in Sans usually look modern */
  font-size: 2.25em;
  font-weight: 700;
  letter-spacing: -0.02em;
  margin-bottom: 0.5em;
  color: var(--pk-neutral-900);
}

.ProseMirror h2 {
  font-family: var(--font-sans);
  font-size: 1.5em;
  border-bottom: 2px solid var(--pk-brand-100);
  padding-bottom: 0.3em;
  margin-top: 2em;
}

.ProseMirror blockquote {
  border-left: 4px solid var(--pk-brand-500);
  background: var(--pk-brand-50);
  padding: 1em 1.5em;
  margin: 2em 0;
  border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
  font-style: italic;
  color: var(--pk-neutral-700);
}

/* Animations */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(10px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.ProseMirror>* {
  animation: fadeInUp 0.4s ease-out backwards;
}

/* 修订模式 - diff标记样式 */
.diff-mark {
  cursor: pointer;
  position: relative;
  transition: all 0.2s ease;
}

/* 删除标记 - 黑色删除线 + 淡色文字 */
.diff-mark-delete {
  text-decoration: line-through;
  text-decoration-color: #000;
  text-decoration-thickness: 1.5px;
  color: #999;
}

/* 插入标记 - 淡黄色背景 */
.diff-mark-insert {
  background-color: #fff3cd;
  padding: 2px 0;
}

/* 替换标记 = 删除 + 插入 */
.diff-mark-replace .original {
  text-decoration: line-through;
  text-decoration-color: #000;
  text-decoration-thickness: 1.5px;
  color: #999;
}

.diff-mark-replace .new {
  background-color: #fff3cd;
  padding: 2px 0;
}

/* 悬停效果 */
.diff-mark:hover {
  opacity: 0.8;
}

/* 段落级别修订模式样式 - 内联Diff版本 */

/* 隐藏原始段落内容（被widget替换） */
.paragraph-hidden {
  display: none !important;
  visibility: hidden !important;
  height: 0 !important;
  margin: 0 !important;
  padding: 0 !important;
  opacity: 0 !important;
}

/* 修改段落的包装器 - Widget版本 */
.paragraph-modified-wrapper {
  display: block;
  /* 确保作为块级元素显示 */
  position: relative;
  border-left: 3px solid #ffc107;
  padding: 12px 12px 12px 16px;
  margin: 8px 0 8px 0;
  /* 修正margin */
  background: rgba(255, 243, 205, 0.15);
  border-radius: 4px;
  transition: all 0.2s ease;
  width: 100%;
  /* 占满宽度 */
  box-sizing: border-box;
  padding-right: 80px;
  /* 防止按钮遮挡文字 */
}

.paragraph-modified-wrapper:hover {
  background: rgba(255, 243, 205, 0.25);
  border-left-color: #ffb300;
}

/* 内联diff内容 */
.inline-diff-content {
  font-size: 16px;
  line-height: 1.8;
  color: #000;
}

/* 删除的文字 */
.inline-diff-delete {
  text-decoration: line-through;
  text-decoration-color: #000;
  text-decoration-thickness: 1.5px;
  color: #999;
}

/* 插入的文字 */
.inline-diff-insert {
  background-color: #fff3cd;
  padding: 2px 0;
}

/* 操作按钮容器 */
.paragraph-actions {
  position: absolute;
  top: 8px;
  right: 8px;
  display: flex;
  gap: 4px;
  z-index: 10;
}

/* 操作按钮样式 */
.paragraph-action-btn {
  width: 28px;
  height: 28px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 14px;
  font-weight: bold;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.paragraph-action-btn.accept {
  background: #000000;
  color: #ffffff;
}

.paragraph-action-btn.accept:hover {
  background: #1a1a1a;
  transform: scale(1.05);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.paragraph-action-btn.reject {
  background: #f5f5f5;
  color: #525252;
  border: 1px solid #e3e3e3;
}

.paragraph-action-btn.reject:hover {
  background: #e8e8e8;
  border-color: #d4d4d4;
  transform: scale(1.05);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

/* 删除段落样式 */
.paragraph-deleted {
  position: relative;
  border-left: 3px solid #999;
  padding-left: 16px;
  margin-left: -15px;
  background: rgba(245, 245, 245, 0.3);
  color: #999;
  text-decoration: line-through;
  text-decoration-color: #000;
  text-decoration-thickness: 1.5px;
  transition: all 0.2s ease;
}

.paragraph-deleted:hover {
  background: rgba(245, 245, 245, 0.5);
  border-left-color: #666;
}

/* 新增段落样式 */
.paragraph-added {
  position: relative;
  border-left: 3px solid #4caf50;
  padding-left: 16px;
  margin-left: -15px;
  background: rgba(76, 175, 80, 0.1);
  transition: all 0.2s ease;
}

.paragraph-added:hover {
  background: rgba(76, 175, 80, 0.2);
  border-left-color: #45a049;
}

/* Tooltip for AI Reason */
.diff-reason-tooltip {
  display: block;
  margin-top: 8px;
  padding: 6px 10px;
  background-color: #f0fdf4;
  /* Light green/brand tint */
  border: 1px solid #bbf7d0;
  border-radius: 6px;
  color: #166534;
  font-size: 13px;
  line-height: 1.4;
  font-family: var(--font-ui);
  position: relative;
  /* Add icon via pseudo-element if needed */
}

.diff-reason-tooltip::before {
  content: '';
  display: block;
  width: 0;
  height: 0;
  border-left: 6px solid transparent;
  border-right: 6px solid transparent;
  border-bottom: 6px solid #bbf7d0;
  position: absolute;
  top: -6px;
  left: 10px;
}

/* =================================================================
   新增加的 UI 样式 (Revision Bar & Loading)
   ================================================================= */

/* 编辑器 Loading 遮罩 - 已废弃/不常用，保留类名但移除嵌套 */
.loading-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(255, 255, 255, 0.7);
  pointer-events: none;
  opacity: 0;
  z-index: -1;
}

/* Non-Blocking Status Indicator - Top Level */
.ai-processing-status {
  position: absolute;
  top: 10px;
  right: 20px;
  background: rgba(255, 255, 255, 0.9);
  border: 1px solid #e3e3e3;
  padding: 6px 12px;
  border-radius: 20px;
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
  color: #666;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
  z-index: 50;
  pointer-events: none;
  animation: slideDown 0.3s ease-out;
}

.status-dot {
  width: 8px;
  height: 8px;
  background-color: #2196F3;
  border-radius: 50%;
  animation: pulse-dot 1s infinite;
}

@keyframes slideDown {
  from {
    transform: translateY(-10px);
    opacity: 0;
  }

  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes pulse-dot {
  0% {
    transform: scale(0.8);
    opacity: 0.5;
  }

  50% {
    transform: scale(1.2);
    opacity: 1;
  }

  100% {
    transform: scale(0.8);
    opacity: 0.5;
  }
}

/* Revision Action Bar - Top Level */
.revision-action-bar {
  position: fixed;
  bottom: 40px;
  left: 50%;
  transform: translateX(-50%);
  background: #111827;
  color: white;
  padding: 12px 24px;
  border-radius: 50px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
  display: flex;
  align-items: center;
  gap: 24px;
  z-index: 1000;
  white-space: nowrap;
  min-width: max-content;
  animation: slideUp 0.3s ease-out;
}

@keyframes slideUp {
  from {
    transform: translate(-50%, 20px);
    opacity: 0;
  }

  to {
    transform: translate(-50%, 0);
    opacity: 1;
  }
}

.revision-info {
  display: flex;
  align-items: center;
  gap: 10px;
  font-weight: 500;
}

.badge {
  background: #444;
  padding: 2px 8px;
  border-radius: 10px;
  font-size: 12px;
  color: #aaa;
}

.revision-buttons {
  display: flex;
  gap: 10px;
}

.accept-all-btn,
.reject-all-btn {
  padding: 6px 16px;
  border-radius: 20px;
  font-size: 14px;
  cursor: pointer;
  border: none;
  font-weight: bold;
  transition: all 0.2s;
}

.accept-all-btn {
  background: #4caf50;
  color: white;
}

.accept-all-btn:hover {
  background: #43a047;
  transform: scale(1.05);
}

.reject-all-btn {
  background: #f44336;
  color: white;
}

.reject-all-btn:hover {
  background: #e53935;
  transform: scale(1.05);
}